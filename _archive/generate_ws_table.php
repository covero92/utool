<?php
$text = <<<'EOT'
--- Sefaz Amazonas - (AM) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefaz.am.gov.br/services2/services/NfeInutilizacao4
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefaz.am.gov.br/services2/services/NfeConsulta4
NfeStatusServico	|	4.00	|	https://nfe.sefaz.am.gov.br/services2/services/NfeStatusServico4
RecepcaoEvento	|	4.00	|	https://nfe.sefaz.am.gov.br/services2/services/RecepcaoEvento4
NFeAutorizacao	|	4.00	|	https://nfe.sefaz.am.gov.br/services2/services/NFeAutorizacao4
NFeRetAutorizacao	|	4.00	|	https://nfe.sefaz.am.gov.br/services2/services/NFeRetAutorizacao4

--- Sefaz Bahia - (BA) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeInutilizacao4/NFeInutilizacao4.asmx
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeConsultaProtocolo4/NFeConsultaProtocolo4.asmx
NfeStatusServico	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeStatusServico4/NFeStatusServico4.asmx
RecepcaoEvento	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeRecepcaoEvento4/NFeRecepcaoEvento4.asmx
NFeAutorizacao	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeAutorizacao4/NFeAutorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeRetAutorizacao4/NFeRetAutorizacao4.asmx
NfeConsultaCadastro	|	4.00	|	https://nfe.sefaz.ba.gov.br/NFeConsultaCadastro4/NFeConsultaCadastro4.asmx

--- Sefaz Goias - (GO) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/NFeInutilizacao4?wsdl
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/NFeConsultaProtocolo4?wsdl
NfeStatusServico	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/NFeStatusServico4?wsdl
RecepcaoEvento	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/NFeRecepcaoEvento4?wsdl
NFeAutorizacao	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/NFeAutorizacao4?wsdl
NFeRetAutorizacao	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/NFeRetAutorizacao4?wsdl
NfeConsultaCadastro	|	4.00	|	https://nfe.sefaz.go.gov.br/nfe/services/CadConsultaCadastro4?wsdl

--- Sefaz Minas Gerais - (MG) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/NFeInutilizacao4
NfeConsultaProtocolo	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/NFeConsultaProtocolo4
NfeStatusServico	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/NFeStatusServico4
RecepcaoEvento	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/NFeRecepcaoEvento4
NFeAutorizacao	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/NFeAutorizacao4
NFeRetAutorizacao	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/NFeRetAutorizacao4
NfeConsultaCadastro	|	4.00	|	https://nfe.fazenda.mg.gov.br/nfe2/services/CadConsultaCadastro4

--- Sefaz Mato Grosso do Sul - (MS) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/NFeInutilizacao4
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/NFeConsultaProtocolo4
NfeStatusServico	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/NFeStatusServico4
RecepcaoEvento	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/NFeRecepcaoEvento4
NFeAutorizacao	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/NFeAutorizacao4
NFeRetAutorizacao	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/NFeRetAutorizacao4
NfeConsultaCadastro	|	4.00	|	https://nfe.sefaz.ms.gov.br/ws/CadConsultaCadastro4

--- Sefaz Mato Grosso - (MT) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/NfeInutilizacao4?wsdl
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/NfeConsulta4?wsdl
NfeStatusServico	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/NfeStatusServico4?wsdl
RecepcaoEvento	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/RecepcaoEvento4?wsdl
NFeAutorizacao	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/NfeAutorizacao4?wsdl
NFeRetAutorizacao	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/NfeRetAutorizacao4?wsdl
NfeConsultaCadastro	|	4.00	|	https://nfe.sefaz.mt.gov.br/nfews/v2/services/CadConsultaCadastro4?wsdl

--- Sefaz Pernambuco - (PE) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/NFeInutilizacao4?wsdl
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/NFeConsultaProtocolo4?wsdl
NfeStatusServico	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/NFeStatusServico4?wsdl
RecepcaoEvento	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/NFeRecepcaoEvento4?wsdl
NFeAutorizacao	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/NFeAutorizacao4?wsdl
NFeRetAutorizacao	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/NFeRetAutorizacao4?wsdl
NfeConsultaCadastro	|	4.00	|	https://nfe.sefaz.pe.gov.br/nfe-service/services/CadConsultaCadastro4?wsdl

--- Sefaz Paraná - (PR) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/NFeInutilizacao4?wsdl
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/NFeConsultaProtocolo4?wsdl
NfeStatusServico	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/NFeStatusServico4?wsdl
RecepcaoEvento	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/NFeRecepcaoEvento4?wsdl
NFeAutorizacao	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/NFeAutorizacao4?wsdl
NFeRetAutorizacao	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/NFeRetAutorizacao4?wsdl
NfeConsultaCadastro	|	4.00	|	https://nfe.sefa.pr.gov.br/nfe/CadConsultaCadastro4?wsdl

--- Sefaz Rio Grande do Sul - (RS) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/nfeinutilizacao/nfeinutilizacao4.asmx
NfeConsultaProtocolo	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/NfeConsulta/NfeConsulta4.asmx
NfeStatusServico	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/NfeStatusServico/NfeStatusServico4.asmx
RecepcaoEvento	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/recepcaoevento/recepcaoevento4.asmx
NFeAutorizacao	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/NfeAutorizacao/NFeAutorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/NfeRetAutorizacao/NFeRetAutorizacao4.asmx
NfeConsultaCadastro	|	4.00	|	https://nfe.sefazrs.rs.gov.br/ws/CadConsultaCadastro/CadConsultaCadastro4.asmx

--- Sefaz São Paulo - (SP) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/nfeinutilizacao4.asmx
NfeConsultaProtocolo	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/nfeconsultaprotocolo4.asmx
NfeStatusServico	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/nfestatusservico4.asmx
RecepcaoEvento	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/nferecepcaoevento4.asmx
NFeAutorizacao	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/nfeautorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/nferetautorizacao4.asmx
NfeConsultaCadastro	|	4.00	|	https://nfe.fazenda.sp.gov.br/ws/cadconsultacadastro4.asmx

--- Sefaz Virtual Ambiente Nacional - (SVAN) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeInutilizacao4/NFeInutilizacao4.asmx
NfeConsultaProtocolo	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeConsultaProtocolo4/NFeConsultaProtocolo4.asmx
NfeStatusServico	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeStatusServico4/NFeStatusServico4.asmx
RecepcaoEvento	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeRecepcaoEvento4/NFeRecepcaoEvento4.asmx
NFeAutorizacao	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeAutorizacao4/NFeAutorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeRetAutorizacao4/NFeRetAutorizacao4.asmx

--- Sefaz Virtual Rio Grande do Sul - (SVRS) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/nfeinutilizacao/nfeinutilizacao4.asmx
NfeConsultaProtocolo	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeConsulta/NfeConsulta4.asmx
NfeStatusServico	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeStatusServico/NfeStatusServico4.asmx
RecepcaoEvento	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/recepcaoevento/recepcaoevento4.asmx
NFeAutorizacao	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeAutorizacao/NFeAutorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeRetAutorizacao/NFeRetAutorizacao4.asmx
NfeConsultaCadastro	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/CadConsultaCadastro/CadConsultaCadastro4.asmx
Consulta GTIN	|	1.00	|	https://dfe-servico.svrs.rs.gov.br/ws/ccgConsGTIN/ccgConsGTIN.asmx

--- Sefaz Virtual de Contingência Ambiente Nacional - (SVC-AN) ---
Serviço	|	Versão	|	URL
NfeInutilizacao	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeInutilizacao4/NFeInutilizacao4.asmx
NfeConsultaProtocolo	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeConsultaProtocolo4/NFeConsultaProtocolo4.asmx
NfeStatusServico	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeStatusServico4/NFeStatusServico4.asmx
RecepcaoEvento	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeRecepcaoEvento4/NFeRecepcaoEvento4.asmx
NFeAutorizacao	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeAutorizacao4/NFeAutorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://www.sefazvirtual.fazenda.gov.br/NFeRetAutorizacao4/NFeRetAutorizacao4.asmx

--- Sefaz Virtual de Contingência Rio Grande do Sul - (SVC-RS) ---
Serviço	|	Versão	|	URL
NfeConsultaProtocolo	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeConsulta/NfeConsulta4.asmx
NfeStatusServico	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeStatusServico/NfeStatusServico4.asmx
RecepcaoEvento	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/recepcaoevento/recepcaoevento4.asmx
NFeAutorizacao	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeAutorizacao/NFeAutorizacao4.asmx
NFeRetAutorizacao	|	4.00	|	https://nfe.svrs.rs.gov.br/ws/NfeRetAutorizacao/NFeRetAutorizacao4.asmx

--- Ambiente Nacional - (AN) ---
Serviço	|	Versão	|	URL
NFeDistribuicaoDFe	|	1.00	|	https://www1.nfe.fazenda.gov.br/NFeDistribuicaoDFe/NFeDistribuicaoDFe.asmx
RecepcaoEvento	|	4.00	|	https://www.nfe.fazenda.gov.br/NFeRecepcaoEvento4/NFeRecepcaoEvento4.asmx
EOT;

$lines = explode("\n", $text);
$currentHeader = '';
$html = "";

foreach ($lines as $line) {
    $line = trim($line);
    if (empty($line)) continue;

    if (strpos($line, '---') === 0) {
        $currentHeader = trim(str_replace('---', '', $line));
        // Extract UF/Name
        // e.g. Sefaz Amazonas - (AM) -> AM
        // e.g. Sefaz Virtual Rio Grande do Sul - (SVRS) -> SVRS
        // e.g. Ambiente Nacional - (AN) -> AN
        if (preg_match('/\((.*?)\)/', $currentHeader, $matches)) {
            $uf = $matches[1];
        } else {
            $uf = $currentHeader;
        }
        
        $html .= "<!-- $currentHeader -->\n";
        continue;
    }

    if (strpos($line, 'Serviço') === 0) continue; // Skip header row

    $parts = array_map('trim', explode('|', $line));
    if (count($parts) >= 3) {
        $servico = $parts[0];
        $versao = $parts[1];
        $url = $parts[2];
        
        $html .= "<tr>\n";
        $html .= "    <td>$uf</td>\n";
        $html .= "    <td>Produção</td>\n";
        $html .= "    <td>$servico</td>\n";
        $html .= "    <td class=\"text-break\">$url</td>\n";
        $html .= "</tr>\n";
    }
}

file_put_contents('ws_table.html', $html);
echo "Generated ws_table.html\n";
?>
